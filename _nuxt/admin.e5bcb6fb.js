import{_ as E,a as A,b as H}from"./PageUser.vue.03105178.js";import{g as M,r as w,h as $,i as j,j as N,k,l as R,f as C,_ as B,o as b,c as g,m as O,e as U,n as z,u as F,b as c,a as v,w as m,d as p,F as S,p as V,t as P,q}from"./entry.9c9bff3e.js";/* empty css                   */const I=()=>null;function K(...r){var u;const i=typeof r[r.length-1]=="string"?r.pop():void 0;typeof r[0]!="string"&&r.unshift(i);let[e,l,t={}]=r;if(typeof e!="string")throw new TypeError("[nuxt] [asyncData] key must be a string.");if(typeof l!="function")throw new TypeError("[nuxt] [asyncData] handler must be a function.");t.server=t.server??!0,t.default=t.default??I,t.lazy=t.lazy??!1,t.immediate=t.immediate??!0;const a=M(),D=()=>a.isHydrating?a.payload.data[e]:a.static.data[e],h=()=>D()!==void 0;a._asyncData[e]||(a._asyncData[e]={data:w(D()??((u=t.default)==null?void 0:u.call(t))??null),pending:w(!h()),error:w(a.payload._errors[e]?$(a.payload._errors[e]):null)});const n={...a._asyncData[e]};n.refresh=n.execute=(o={})=>{if(a._asyncDataPromises[e]){if(o.dedupe===!1)return a._asyncDataPromises[e];a._asyncDataPromises[e].cancelled=!0}if(o._initial&&h())return D();n.pending.value=!0;const _=new Promise((s,f)=>{try{s(l(a))}catch(T){f(T)}}).then(s=>{if(_.cancelled)return a._asyncDataPromises[e];t.transform&&(s=t.transform(s)),t.pick&&(s=L(s,t.pick)),n.data.value=s,n.error.value=null}).catch(s=>{var f;if(_.cancelled)return a._asyncDataPromises[e];n.error.value=s,n.data.value=C(((f=t.default)==null?void 0:f.call(t))??null)}).finally(()=>{_.cancelled||(n.pending.value=!1,a.payload.data[e]=n.data.value,n.error.value&&(a.payload._errors[e]=$(n.error.value)),delete a._asyncDataPromises[e])});return a._asyncDataPromises[e]=_,a._asyncDataPromises[e]};const x=()=>n.refresh({_initial:!0}),y=t.server!==!1&&a.payload.serverRendered;{const o=j();if(o&&!o._nuxtOnBeforeMountCbs){o._nuxtOnBeforeMountCbs=[];const s=o._nuxtOnBeforeMountCbs;o&&(N(()=>{s.forEach(f=>{f()}),s.splice(0,s.length)}),k(()=>s.splice(0,s.length)))}y&&a.isHydrating&&h()?n.pending.value=!1:o&&(a.payload.serverRendered&&a.isHydrating||t.lazy)&&t.immediate?o._nuxtOnBeforeMountCbs.push(x):t.immediate&&x(),t.watch&&R(t.watch,()=>n.refresh());const _=a.hook("app:data:refresh",s=>{if(!s||s.includes(e))return n.refresh()});o&&k(_)}const d=Promise.resolve(a._asyncDataPromises[e]).then(()=>n);return Object.assign(d,n),d}function L(r,i){const e={};for(const l of i)e[l]=r[l];return e}const G={},J={"py-3":"","table-cell":"","text-left":""};function Q(r,i){return b(),g("div",J,[O(r.$slots,"default")])}const W=B(G,[["render",Q]]),X={},Y={"table-cell":""};function Z(r,i){return b(),g("div",Y,[O(r.$slots,"default")])}const ee=B(X,[["render",Z]]),te={"mb-3":"","text-light-100":""},ae={table:"","w-full":""},ne={"table-header-group":"","font-bold":""},se={"table-row":""},re={"table-row-group":""},le=U({__name:"admin",async setup(r){let i,e;const{data:l}=([i,e]=z(()=>K("users",()=>$fetch("/api/users",{headers:q()}))),i=await i,e(),i),t=F();return(a,D)=>{const h=E,n=A,x=H,y=W,d=ee;return b(),g("div",null,[c(h,{title:"Admin page"}),c(n,{description:"This page should only be visible if user is connected and has admin role"}),c(x,{user:C(t)},null,8,["user"]),v("div",te,[v("div",ae,[v("div",ne,[v("div",se,[c(y,null,{default:m(()=>[p("ID")]),_:1}),c(y,null,{default:m(()=>[p("Email")]),_:1}),c(y,null,{default:m(()=>[p("Roles")]),_:1})])]),v("div",re,[(b(!0),g(S,null,V(C(l),u=>(b(),g("div",{key:u.id,"table-row":""},[c(d,null,{default:m(()=>[p(P(u.id),1)]),_:2},1024),c(d,null,{default:m(()=>[p(P(u.email),1)]),_:2},1024),c(d,null,{default:m(()=>[p(P(u.roles.join(", ")),1)]),_:2},1024)]))),128))])])])])}}});export{le as default};
